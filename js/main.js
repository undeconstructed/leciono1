
const translations = {
  "de": {
    "title": "Esperanto in 17 Minuten"
  },
  "eo": {
    "title": "Esperanto en 17 minutoj",
    "01": "(Ĉi tio ne estas Esperanto-kurso, sed ĝi donu al vi ideon pri kio la lingvo estas, kaj vi verŝajne povus lerni la plimulton de tio kion vi bezonas per ĉi tio, kaj per iom da legado.)",
    "02": "Esperanto estas aro da vortradikoj, kaj sistemo por aranĝi ilin por ke oni povu uzi ilin por krei ion pli grandan. Ni komencu.",
    "03": "Rigardu tra la fenestro. Verŝajne pluvas. La radiko por tio estas <em>pluv-</em>.",
    "04": "Pluvo estas kialo por paroli. Por diri ke pluvas, prenu la radiko \"pluv-\", kaj verbigu ĝin, per aldono de la finaĵo kiu signifas \"okazas nun\": <em>-as</em>.",
    "e01": "Pluvas.",
    "05": "Tio estas frazo. Oni konstruas frazon ĉirkaŭ verbo - tiu verbo enhavas la kialon por fari la frazon, kaj marko kiu diras kiam tiu afero okazas. Estas kvin finaĵoj:",
    "verb-is": "okazis en la pasinteco",
    "verb-as": "okazas nun",
    "verb-os": "verŝajne okazos iam en la estonteco",
    "verb-us": "okazas en imaga mondo",
    "verb-u": "iu volas, ke ĝi okazu",
    "06": "Kelkfoje, oni volas diri kiu aŭ kio faras la verbon. Tio estas tre facila - prenu la radiko de tiu afero, kaj substantivigu ĝin per la <em>-o</em> finaĵo.",
    "e02": "Kato kuris",
    "07": "Se oni volas uzi alian koncepton por priskribi substantivon, prenu la radikon por tiu koncepto, kaj aldonu <em>-a</em> por fari ĝin adjektvo:",
    "e03": "Blua kato dormos.",
    "08": "Eble estas alia koncepto kiu iel rilatas al ĉi tiu ago. Eble estas loko, en kiu ĝi okazas. Por aldoni alian substantivon, oni povas enkonduki ĝin per prepozicion, por diri kiel ĝi rilatas al la ago.",
    "e04": "Blua kato sidas antaŭ televidilo (ilo-por-televidi).",
    "09": "Kelkfoje ne estas evidente elektinda prepozicio, aŭ vi nur ne volas uzi ĝin. Tiaokaze vi povas marki la substantivon (kaj ĝiajn adjektivojn) per <em>-n</em> finaĵo, por diri \"vi scias pri kio estas ĉi tiu afero\".",
    "e05": "Kateto ne ŝatas pluvegon.",
    "10": "Parenteze, ĉar ĉio estas nete markita, oni povas iom reaordigi la vortojn:",
    "e06": "Pluvon malvarman (malo-de-varma) kato malamas (malo-de-amas).",
    "11": "Sed ne tro faru tion, nur uzi ĝin kiam ĝi plifaciligas komprenon de la frazo.",
    "12": "Estas nur unu plia speco de verbo por lerni: adverboj. Mi ne scias precize kio estas adverbo, sed ĝi finiĝas per <em>-e</em> kaj oni uzas ĝin por priskribi ion ajn kiu ne estas substantivo. Ili estas tre flekseblaj (eble dangere!), sed komencu per meti ilin antaŭ la vorto kiun ili priskribas, kaj vi baldaŭ komprenos la ideon:",
    "e07": "La subite malseka (malo-de-seka) kato rapide enkuras (en-kuras).",
    "13": "Foje oni devas esti pli precize ol nur \"kato\" - oni dfevas diri kiu kato. La plej facila eblo estas uzi <em>la</em>, kiu surbaze signifas \"vi scias kiun.\"",
    "e08": "La kato manĝas manĝaĵojn (aĵon-por-manĝi).",
    "14": "Aŭ eble oni pli volas diri \"tiu, pri kiu ni parolas\":",
    "e09": "Tiu kato ĉasus hundojn.",
    "15": "Se oni volas rilatigi kelkajn frazojn, oni bezonas vortojn por fari tion. Oni ĉiam havos unu ĉefan frazon, kiel antaŭe, sed rilataj frazoj bezonos enkondukon, ekzemple:",
    "e10": "Tiu kato ĉasus hundojn, se ĝi trovus hundojn.",
    "e11": "Tiu kato malŝatas hundojn, ĉar ili estas bruaj.",
    "16": "Dum ni tiel emas, ni faru ĉiujn el la pronomoj:",
    "mi": "la ulo kiu parolas",
    "ni": "la parolanto kaj ties kunuloj",
    "vi": "al kiu, tiu ulo parolas",
    "gxi": "alia aĵo",
    "li": "alia iĉa ulo",
    "sxi": "alia ina ulo",
    "ili": "plruaj aliaj aĵoj aŭ uloj",
    "oni": "simple, iu",
    "17": "\"Sed\", vi demandas, \"kio pri seks-neŭtraleco?\". Nu, ni revenos al tiu temo, poste.",
    "18": "Okej, nun venas malfacila parto. Ĉu vi estas preta? Kelkfoje oni volas ligi frazojn laŭ speciala maniero, kie oni prenas ideon de unu frazo kaj iel metas ĝin en la alian. Por tio, oni uzas la vorton <em>kiu</em>, kiu estas kiel <em>tiu</em>, sed estas speciale por citi ideon en nova frazo:",
    "e12": "La kato, kiu ĉasas hundojn, estas feliĉa.",
    "19": "Hm, ĉu estas sufiĉe klare, ke la \"kiu\" estas pri la kato? Jes, verŝajne, sed ni povas esti pli klara:",
    "e13": "La kato, kiu kato estas granda, estas dormema (ema-al-dormo).",
    "20": "Fakte, oni povas preni iun ajn ideojn el la ĉefa frazo, kaj meti ĝin en subfrazon, ni nur devas diri kian aferon ĝi estas:",
    "e14": "Mi faris tion je la oka horo, je kiu tempo mi ridis.",
    "21": "Fakte, ekzistas kelkaj faciligoj kiujn oni povas uzi por ĉi tiaj aferoj:",
    "e15": "Mi estas kontenta, kiam mi estas kun vi.",
    "22": "Ni parolas pri ĉiuj el tiaj vortoj iam poste, sed por nun jen nur unu plian: Foje oni simple volas paroli pri .. io. Ne estas klare, kia afero ĝi estas tiu afero, ĝi simple estas io. Ni provu tion:",
    "e16": "Kio estas tio? Tio estas kato.",
    "23": "Ho, jes, ankaŭ tiuj <em>ki-</em> vortoj estas bonaj por demandoj. Pensu ke ili signifas \"metu la taŭgan aferon ĉi tien, mi petas\". Ankaŭ ekzistas simplan rimedon por starigi jes/ne demandon:",
    "e17": "Ĉu vi komprenas? Yes .. kaj ne.",
    "24": "Bone. Estas nur unu plua afero por diskuti. Ni komencos facile, kaj poste iĝu freneza kun ĝi. Se oni volas priskribi ion dufoje, ekzemple per speco kaj per nomo, simple metu ilin ambaŭ kune:",
    "e18": "Mia amiko Tomaso estas tie.",
    "25": "Sed, kion fari se oni ne povas trovi vorton por io? Nu, oni devus uzi frazon. Pensu, ke la frazo prenas la lokon de nomo: ĝi estas sufiĉe da informo por komuniki ideon, sed per pluraj vortoj. Ni provu:",
    "e19": "Mi ŝatas la ideon ke katoj povu flugi.",
    "26": "\"la ideon\" (la ideo) ne estas sufiĉe da informo, ĉar ĝi ne diris kio estas la ideo, do ne aldonas frazon kiu diras kio estas la ideo. La eta vorto <em>ke</em> nur diras \"jen frazo\". Estas multo kiun oni povas fari per ĉi tio, do ni provu unu-du aferojn:",
    "e20": "Mi estas kontenta, pro tio ke vi estas ĉi tie.",
    "27": "La vorto \"tio\" signifas \"tiu afero\", sed kiu afero?! Ĝi ne diras!! Nu, tial ni aldonis frazon por klarigi. Fakte, la \"tio\" ne estas tre interesa, ni eble povus forlasi ĝin. Simile, ni eble ne bezonas la \"pro\" - oni divenus ke ĉi tio estas pri la kaŭzo de io, ĉu ne? Eble ni povus nur diri:",
    "e21": "Mi estas kontenta ke vi estas ĉi tie.",
    "28": "Sed memoru! Ju pli da vortoj oni forĵetas, des pli la risko ke ĉio eksplodos!",
    "29": "Dum ni parolas pri forĵeti vortojn, estas alia speco de verba afero, kiu ne vere estas verbo. Se vorto finiĝas per <em>-i</em>, ĝi estas speco de ĝenerala ideo de verbo. La evento ne okazas, ĝi simple iel ekzistas, kaj indikas ke kompleta frazo ekzistas, nedirate. Sed provu priprensi ĉu iu povus miskompreni.",
    "e22": "La kato volas dormi.",
    "30": "Kaj finfine estas kelkaj afero kiujn mi ne volas klarigi nun. Ili certe estos iom konfuzaj, kaj ofte temas pri la tre utilaj radikoj <em>ig</em> kaj <em>iĝ</em>.",
    "e23": "Tio interesas min. Mi interesiĝas.",
    "e24": "La kato bluiĝis, ĉar mi bluigis ĝin.",
    "31": "Kaj, ankaŭ estas participoj, kiuj permesas ke oni uzi agaj konceptoj por priskribi aferoj, ekzemple por diri ke io estas farata. Estas 6 participoj, sed ili sekvas bonan skemon, do vi komprenos. Verŝajne.",
    "e25": "Mi estus farinta tion. Mi estos faranta tion. Finfine, tio estos farita.",
    "e26": "Trovinte la hundon, mi estas serĉonta la katon.",
    "32": "Ho, atendu, mi promesis paroli pri tiuj ki- kaj ti- kaj neni- vortoj, kaj mi jam ne faris tion. Fakte mi eĉ neniam menciis neni- antaŭ nun. Bone, jen la komencoj kaj finoj de kelkaj vortoj, simple kunmeti ilin:",
    "tabelti": "tiu",
    "tabelki": "kiu",
    "tabeli": "iu",
    "tabelneni": "neniu",
    "tabelcxi": "ĉiu",
    "tabelo": "afero (ĉi tiu estas substantivo)",
    "tabelu": "individuo (ĉi tiu estas speco de adjektivo)",
    "tabela": "speco (ankaŭ adjektivo)",
    "tabeles": "de individuo (denove, adjektivo)",
    "tabelel": "maniero (ĉi tiu estas adverbo)",
    "tabele": "loko (kaj tiel estas la cetero, pli-malpli)",
    "tabelam": "tempo/kiamo",
    "tabelal": "kialo",
    "tabelom": "kvanto/kiomo",
    "33": "Iel mi forgesis pri kelkaj bazaj vortoj, do ni rigardu kelkajn pluajn frazojn:",
    "e27": "Vi, kaj mi, kaj la kato, estas ĉi tie, sed la hundo mankas.",
    "e28": "Nun, la kato bojas kiel hundo. Aŭ eble tio estas la hundo.",
    "e29": "La lingvo estas facile lernebla, kaj lerninda, kaj baldaŭ estos lernita.",
    "34": "Jes. Tio sufiĉos.",
    "end": "Kaj, kio nun? Lernu, uzu, ĝuu! Estas retaj kursoj ĉe <a href=\"https://lernu.net\">lernu.net</a>, kaj ĉe <a href=\"https://www.duolingo.com/\">Duolingo</a>, aŭ ĉe <a href=\"https://learn.esperanto.com/\">Esperanto en 12 lecionoj</a>. Aŭ eĉ pli bone, aliĝu al kurso instruata de <a href=\"https://londonaesperantoklubo.com/OnlineEsperantoCourses.html\">La Londona Esperanto-Klubo</a>."
  },
  "es": {
    "title": "Esperanto en 17 minutos",
    "01": "Esto no es un verdadero curso de Esperanto, pero te dará la idea de como es este idioma y, probablemente, puedas aprender la mayoria de lo que necesitas mediante este texto y algo de lectura.",
    "02": "El esperanto tiene un conjunto de raices y un sistema que permite unirlas para crear palabras más grandes. Comencemos.",
    "03": "Mira por la ventana. Quizá llueva. La raíz para esto es <em>pluv-</em>.",
    "04": "La lluvia es algo sobre lo que se puede hablar. Para decir que llueve, usa la raíz \"pluv-\" y tranformala en un verbo añadiendo un sufijo que significa \"ocurre ahora\": <em>-as</em>.",
    "e01": "llueve.",
    "05": "Esto es una frase. Se construye una frase alrededor de un verbo. Un verbo tiene la capacidad de hacer una frase que indica una acción. Existen cinco sufijos que indican cuándo ocurre la acción:",
    "verb-is": "ocurrió en el pasado",
    "verb-as": "ocurre ahora",
    "verb-os": "ocurrirá en el futuro",
    "verb-us": "ocurre hipotéticamente",
    "verb-u": "alguien quiere que ocurra",
    "06": "Algunas veces se quiere decir quíen hace la acción del verbo (el sujeto). Es muy fácil. Coge la raíz y transformala en sustantivo añadiendo el final <em>-o</em>.",
    "e02": "Un gato corría",
    "07": "Si se quiere usar otro concepto para describir el sustantivo, toma la raíz y añadele el final <em>-a</em> para transformarla en adjetivo:",
    "e03": "Un gato azul dormirá.",
    "08": "Para añadir un sustantivo que indique el lugar, se puede introducir con una preposición que indica cómo se relaciona con la acción.",
    "e04": "Un gato azul se sienta delante un televisor (ilo- significa herramienta. Televidilo es la herramienta para ver la televisión; esto es, un televisor).",
    "09": "Algunas veces no es evidente usar una preposición o no la quieres usar. En ese caso puedes marcar el sustantivo (y sus adjetivos si los tuviera) mediante el final<em>-n</em> final para decir \"tú sabes sobre qué va esto\".",
    "e05": "A un gatito no le gusta una lluvia grande. (-et- significa pequeño y -eg-, grande)",
    "10": "Esto permite cambiar el orden de las palabras en la frase:",
    "e06": "Un gato odia una lluvia fría. (Mal- significa contrario. Malvarma significa frío porque es lo contrario de caliente -varma-. Malamas significa odia porque es lo contrario de ama)",
    "11": "Pero no hagas esto demasiado. Úsalo solo cuando facilite la comprensión de la frase.",
    "12": "Sólo hay otro tipo de palabra que aprender: los adverbios. Yo no sé exactamente qué es un adverbio, pero finaliza con la letra <em>-e</em>. Se usa para describir verbos, adjetivos y otros adverbios. Son muy flexibles (¡quizá peligrosos!). Comienza poniéndolos delante de la palabra a la que describe. Pronto comprenderás la idea:",
    "e07": "El gato subitamente humedo (lo contrario de seco) rápidamente entró corriendo. (kuri -> correr; en -> hacia dentro; enkuri -> correr hacia dentro)",
    "13": "A veces se debe de ser más preciso que decir solo un gato \"kato\" - se debe defirnir a qué gato se refiere. La solución más fácil es usar el artículo <em>la</em>, que básicamente significa \"tú sabes cual.\"",
    "e08": "El gato come comida (manĝaĵon: aĵon -algo- para manĝi -comer-).",
    "14": "O posiblemente se quiere decir \"ese sobre el que hablamos\":",
    "e09": "Ese gato cazaría un perro.",
    "15": "Si se quieren relacionar frases se necesitan palabras para hacerlo. Siempre hay una frase principal, pero las frases relacionadas (subordinadas) necesitan algo para unirse a ella, por ejemplo:",
    "e10": "Ese gato cazaría un perro, si encontrara un perro.",
    "e11": "A ese gato no le gustan los perros porque son ruidosos.",
    "16": "Mientras tanto, veamos los pronombres:",
    "mi": "La persona que habla: yo.",
    "ni": "Las personas que hablan: nosotros.",
    "vi": "La persona o personas con las que se habla: tú, usted, vosotros, ustedes. ",
    "gxi": "La cosa de la que se habla: ello. ",
    "li": "Alguien del que se habla: él.",
    "sxi": "Alguien femenino del que se habla: ella",
    "ili": "Varias personas o cosas de las que se habla: ellos",
    "oni": "Alguien, se",
    "17": "\"Pero\", tu preguntas, \"¿qué hay sobre la neutralidad de genero?\". Volveremos sobre ese tema después.",
    "18": "Bien, ahora viene una parte difícil. ¿Estás preparado? A veces hay que unir frases de una manera especial en la que uno coge una idea de una frase y la introduce en otra. Para eso usamos la palabra <em>kiu</em>, que es como <em>tiu</em>, pero especial para citar la idea en otra frase:",
    "e12": "El gato que caza perros es feliz.",
    "19": "¿Está suficientemente claro que \"kiu\" se refiere al gato? Sí, pero podemos ser más claros:",
    "e13": "El gato que es grande es dormilon ( el afijo -em- significa tener inclinación; al unirlo a la raiz dorm -dormir- significa que tiene inclinación a dormir; dormema -> dormilon) .",
    "20": "De hecho, se puede coger cualquier idea de la frase principal para meterla en la subordinada. Solo debemos decir de qué cosa se trata:",
    "e14": "Yo hice eso a las ocho, en ese momento me reí.",
    "21": "De hecho, existen algunas ayudas que puedes usar en estos casos:",
    "e15": "Yo estoy contento cuando estoy contigo.",
    "22": "Hablaremos sobre todas estas palabras después, pero por ahora una más: A veces uno quiera hablar sobre...algo. No está claro que es eso solo que es algo. Entonces diremos esto:",
    "e16": "¿Qué es eso? Eso es un gato.",
    "23": "Oh, sí. También esas <em>ki-</em> palabras son buenas para hacer preguntas. Piensa que significa \"Te pido que metas la cosa adecuada aquí\". También existe un recurso simple para hacer preguntas que se responden con sí/no, la palabra \"ĉu\". Podemos traducir esta palabra por \"acaso\" o por el signo de apertura de interrogación \"¿\". La respuesta a una pregunta con \"ĉu\" siempre será  sí o no.",
    "e17": "¿Comprendes?  Sí... y no.",
    "24": "Bien, solo hay una cosa más. Simplificaremos al principio y posteriormente se hara más complicado. Si quieres desicribir algo dos veces, por ejemplo por tipo y por nombre, simplemente coloca ambos juntos:",
    "e18": "Mi amigo Tomas está allí.",
    "25": "Pero, ¿qué se puede hacer si no encontramos una palabra para ello? Entonces debemos usar una frase. Piensa, la frase toma la posición del nombre. Eso es suficiente para comunicar para comunicar una idea, pero mediante muchas palabras. Probemos:",
    "e19": "A mí me gusta la idea de que un gato pueda volar.",
    "26": "\"La idea\" no da suficiente información porque no dice qué es, debemos indicar qué es esa idea (que los gatos puedan volar). La palabra <em>ke</em> ahora dice \"he aquí la información\". Se pueden hacer muchas cosas con este método. Probemos un par de frases:",
    "e20": "Estoy contento por que está aquí.",
    "27": "La palabra \"tio\" significa \"esa cosa\", pero qué cosa. ¡No lo dice! Entonces añadimos una frase para explicarlo. De hecho, la palabra \"tio\" no es necesaria, la podemos olvidar. Igualmente, es posible que no necesitemos  \"pro\" - Se adivina cuál es la causa de esto ¿no? Podríamos decir:",
    "e21": "Estoy contento de que estés aquí.",
    "28": "Pero, ¡recuerda! ¡Cuantas más palabras falten más fácil es que el significado no esté claro!",
    "29": "Mientras hablo de olvidar palabras, hay otro tipo de asunto verbal, que no es auténticamente un verbo. Si la palabra finaliza con <em>-i</em>, esto es una idea general sobre el verbo (el infinitivo). El suceso no ocurre, simplemente, de alguna manera existe e indica que una frase entera existe, sin decirla. Prueba a reflexionar si alguien lo comprendería mal.",
    "e22": "El gato quiere dormir.",
    "30": "Y, finalmente, hay algunos asuntos que no puedo explicar ahora. Ciertamente son algo confusos y frecuentemente tratan sobre raices muy útiles <em>ig</em> e <em>iĝ</em>.",
    "e23": "Eso tiene interes para mi. Yo me intereso.",
    "e24": "El gato se azulea porque yo lo hago azul.",
    "31": "También estan los participios que permiten usar palabras que tiene sentido de acción (verbales) para describir algo (funcionan como adjetivos). Por ejemplo, para decir que algo está hecho. Hay 6 participios, pero ellos están hechos de manera sistemática y probablemente los comprenderás",
    "e25": "Yo estaría haciendo eso. Yo estaré haciendo eso. Finalmente eso estará hecho.",
    "e26": "Encontrando el perro yo estoy por encontrar el gato.",
    "32": "Atiende, he prometido hablar sobre esas ki-, ti- y neni- palabras y no lo he hecho. Incluso no he mencionado neni- antes de ahora. Bueno, he aquí los comienzos y finales de algunas palabra. Simplemente, combínalos:",
    "tabelti": "ese",
    "tabelki": "cuál",
    "tabeli": "alguien, alguno",
    "tabelneni": "ninguno, nadie",
    "tabelcxi": "todos",
    "tabelo": "algo (esto es un sustantivo)",
    "tabelu": "alguien (esto es una especie de adjetivo)",
    "tabela": "tipo (también adjetivo)",
    "tabeles": "pertenencia (otra vez adjetivo)",
    "tabelel": "manera (esto es un adverbio)",
    "tabele": "lugar (y como esto los demás más o menos)",
    "tabelam": "tiempo",
    "tabelal": "motivo",
    "tabelom": "cantidad",
    "33": "En algún sitio he olvidado algunas palabras básicas. Veamos algunas frases adicionales:",
    "e27": "Yo, tú y el gato estamos aquí pero el perro falta.",
    "e28": "Ahora, el gato ladra como un perro. O quizá eso es un perro.",
    "e29": "El idioma se aprende fácilmente y merece la pena ser aprendido y pronto estará aprendido.",
    "34": "Sí, es suficiente.",
    "end": "¿Y ahora qué? Aprende, usa, disfruta. Hay cursos en Internet en <a href=\"https://lernu.net\">lernu.net</a>, y en <a href=\"https://www.duolingo.com/\">Duolingo</a>, aŭ ĉe <a href=\"https://learn.esperanto.com/\">Esperanto en 12 tagoj</a>. O, incluso mejor, únete a un kurso de <a href=\"https://londonaesperantoklubo.com/OnlineEsperantoCourses.html\">El Club Esperantista de Londres</a>."
  },
  "fr": {
    "title": "Espéranto en 17 minuits"
  },
  "pl": {
    "title": "Esperanto w 17 minut"
  },
  "pt": {
    "title": "Esperanto em 17 minutos",
    "01": "(Esse não é um curso de Esperanto, mas irá te dar uma ideia sobre a língua, e você provavelmente poderá aprender a maioria daquilo que é necessário, e também através de um pouco de leitura.)",
    "02": "Esperanto consiste em um conjunto de palavras-raizes, e um sistema para organizá-las, para que se possa usá-las para se criar algo maior. Comecemos!.",
    "03": "Olhe através da janela. Talvez esteja chovendo. A raíz para isso é <em>pluv-</em>.",
    "04": "A chuva é uma razão para conversar, para dizer que chove. Tome a raíz \"pluv-\", e a transforme em verbo, por adição ao final que significa \"okazas nun\": <em>-as</em>.",
    "e01": "Chove.",
    "05": "Eis uma frase. Se constrói frases ao redor de verbos - esse verbo contem a razão para fazer uma frase, e perceba quem fala quando algo acontece. Existe cinco finais:",
    "verb-is": "Algo ocorreu no passado",
    "verb-as": "Ocorre agora",
    "verb-os": "Provavelmente ocorrerá em algum ponto do futuro",
    "verb-us": "Ocorre em um mundo imaginário",
    "verb-u": "Alguém quer que algo ocorra",
    "06": "Às vezes se quer dizer quem o que faz o verbo. Isto é muito fácil - Tome a raiz de algo e a transforme em um substantivo através do final <em>-o</em>.",
    "e02": "(O) Gato correu.",
    "07": "Quando se quiser um outro conceito a partir de um substantivo, tome a raiz de um substantivo e adicione <em>-a</em> para torná-lo adjetivo:",
    "e03": "(Um) Gato azul dormirá.",
    "08": "Talvez haja um outro conceito que, de alguma forma, se refira a dita ação. Talvez haja um local no qual ela ocorre. Para adicionar um outro substantivo, pode-se fazê-lo por uma preposição para dizer como ele se refere a ação.",
    "e04": "(o) gato azul se senta em frente à televisão (ilo-por-televidi).",
    "09": "Às vezes não há uma preposição à se escolher ou você não quer usá-la. Neste caso você pode marcar o substantivo (e seus adjetivos) com o final <em>-n</em>, para dizer \"Você sabe sobre o que é este objeto\".",
    "e05": "(um) gatinho não gosta de chuvão.",
    "10": "Obs: Já que se trata de um marcação precisa, pode-se reorganizar de uma outra forma",
    "e06": "chuva fria (contrário de quente) Gato odeia (O contrário de amar).",
    "11": "Mas não faça isso muito frequentemente. Use apenas quando o propósito for facilitar a compreensão.",
    "12": "Há apenas mais uma forma de palavras para se aprender: advérbios. Eu não sei exatamente o que é um advérbio, porém ele termina em <em>-e</em> e o usamos para descrever qualquer coisa que não seja um substantivo. Eles são muito flexíveis (talvez até perigosos!), no entanto, comece por colocá-los antes da palavra a qual ele descreve e você logo comprenderá a ideia.",
    "e07": "o gato subitamente úmido (contrário de seco) rapidamente (corre).",
    "13": "Por vezes, deve-se dizer algo mais preciso do que apenas \"gato\" - Deve-se dizer QUAL gato. A forma mais fácil é usar <em>La</em>, que basicamente significa \"Você sabe qual.\"",
    "e08": "o gato come comida (coisa-para-comer).",
    "14": "Ou talvez pode-se dizer \"isso, sobre o qual nós falamos\":",
    "e09": "Este gato caçaria cachorros.",
    "15": "Quando se quer relacionar algumas frases, precisa-se de palavras para isso. Sempre se terá uma frase principal (como a anterior) e orações relacionadas (elas precisam de introdução). Exemplos:",
    "e10": "Este gato caçaria cachorros, caso ele os encontrasse.",
    "e11": "Este gato detesta cachorros, pois eles são barulhentos",
    "16": "Se quisermos, faremos com cada um dos pronomes:",
    "mi": "a pessoa que fala",
    "ni": "o falante e seus companheiros",
    "vi": "a quem o sujeito fala",
    "gxi": "outro",
    "li": "outra pessoa (masculina)",
    "ŝi": "outra pessoa (feminina)",
    "ili": "muito de algo ou muitas pessoas",
    "oni": "simplesmente alguém",
    "17": "\"Mas\", você pode perguntar, \"e sobre a neutralidade de gênero?\". Bem, voltarei a este tema posteriormente.",
    "18": "Certo, agora vem a parte difícil. Você está pronto (a)? Por vezes se quer ligar frases através de uma forma especial, onde se toma ideias de algumas frases e, de alguma forma, se coloca em uma outra. Para isso, se usa a palavra <em>kiu</em>, que é como <em>este (a)</em>, porém é especialmente usado para citar uma ideia em uma outra oração:",
    "e12": "o gato, que caça cachorros, está feliz.",
    "19": "Hm, está suficientemente claro, que a \"que, o (a) qual\" se trata do gato? Sim, provavelmente, porém pode-se ser mais claro:",
    "e13": "o gato, que é grande, está dormente (ema-al-dormo).",
    "20": "De fato, pode-se tomar alguma ideia da frase principal e colocá-la em uma outra frase, apenas devemos dizer o que ela é:",
    "e14": "Eu fiz isso às 20:00 horas, quando eu ri.",
    "21": "Na verdade, há alguns facilitadores que podemos usar para isso:",
    "e15": "Estou feliz quando estou contigo.",
    "22": "Falaremos sobre todas estas palavras depois, mas por ora apenas mais uma: Às vezes, quer se simplesmente falar de ... algo. Não está claro de que coisa se trata, simplesmente se trata de algo. Nós experimentaremos isto:",
    "e16": "O que é isto? Isto é (um) gato.",
    "23": "Oh sim, Inclusive estas palavras <em>ki-</em> são boas para se usar como perguntas. Pense que signficam \"Coloque as coisas apropriadas aqui, eu peço\". Também existe recursos simples de se por uma questão sim/não:",
    "e17": "Você entende? sim … e não.",
    "24": "Certo. Resta apenas mais um assunto para se discutir. Começaremos facilmente e, posteriormente, enlouqueceremos. Quando se quer prescrever algo duas vezes, por espécie e por nome, coloque-os simplesmente juntos:",
    "e18": "Meu amigo Tomaso está ali/lá.",
    "25": "Mas, o que fazer quando não se pode encontrar palavras para algo? Então, deve-se usar uma frase. Pense que a frase toma lugar de nome: Há informações suficientes para comunicar ideias, porém através de muitas orações. Tentaremos:",
    "e19": "Eu gosto da ideia de que gatos possam voar.",
    "26": "\"la ideon\" (A ideia) não é informação suficiente, pois ela não diz o que é a ideia, então ela não adiciona uma frase que diz o que é a ideia . A palavra <em>ke</em> apenas diz \"jen frazo\". Há muito o que se pode fazer através disso, então tentaremos uma ou duas coisas:",
    "e20": "Estou contente, pois você está aqui.",
    "27": "A palavra \"tio\" quer dizer \"tiu afero\", mas o quê?! Ela não diz!! Então, por isto eu adicionei uma frase para explicar. Na verdade, \"tio\" não é muito interessante, talvez possamos deixá-lo de lado. De forma similar, talvez não precisemos de \"pro\" - Pode-se imaginar que isto seja a causa de algo, não é mesmo? Talvez possamos apenas dizer:",
    "e21": "Estou feliz que você está aqui.",
    "28": "Mas lembre-se! Quanto mais palavras jogamos fora, maior o risco que tudo exploda!",
    "29": "Enquanto falamos de jogar palavras fora, há uma espécie de verbo, que de fato não é verbo. Quando dita palavra termina em <em>-i</em>, ela é uma espécie de ideia geral de verbo. O acontecimento não ocorre, ele apenas existe de alguma forma e informa que uma frase completa existe, de forma não dita. Mas tente imaginar se alguém poderia interpretá-la errado.",
    "e22": "O gato quer dormir.",
    "30": "E finalmente eis alguns tópicos que não quero explicar agora. Eles certamente seriam um pouco confusos, e geralmente se tratam de raizes bem úteis <em>ig</em> e <em>iĝ</em>.",
    "e23": "Isso me interessa. Eu me interesso.",
    "e24": "O gato se tornou azul, porque alguém o pintou de azul.",
    "31": "Também há particípio, que permite que usemos conceitos de ação para descrever algo. Por exemplo: Podemos dizer que algo foi feito. Há seis particípios, porém eles seguem um bom esquema. Você entenderá. Provavelmente",
    "e25": "Eu estaria fazendo algo. Estarei fazendo algo. Finalmente, isto será feito.",
    "e26": "Encontrando o cachorro, estarei encontrando o gato.",
    "32": "Oh, espere, eu prometi falar sobre palavras ki- e ti- e neni-, porém não o fiz. De fato, inclusive nem mencionei neni- até o momento. Então, eis o começo de algumas palavras, simplesmente as ligue:",
    "tabelti": "tiu",
    "tabelki": "kiu",
    "tabeli": "iu",
    "tabelneni": "neniu",
    "tabelcxi": "ĉiu",
    "tabelo": "afero (Isto é um substantivo)",
    "tabelu": "individuo (Isto é uma espécie de substantivo)",
    "tabela": "speco (também um substantivo)",
    "tabeles": "de individuo (novamente, substantivo)",
    "tabelel": "maniero (Isto é um substantivo)",
    "tabele": "loko (E isto o restante, mais ou menos)",
    "tabelam": "tempo/kiamo",
    "tabelal": "kialo",
    "tabelom": "kvanto/kiomo",
    "33": "De alguma forma esqueci palavras básicas, então olharemos algumas sentenças:",
    "e27": "vi, kaj mi, kaj la kato, estas ĉi tie, sed la hundo mankas.",
    "e28": "nun, la kato bojas kiel hundo. aŭ eble tio estas la hundo.",
    "e29": "la lingvo estas facile lernebla, kaj lerninda, kaj baldaŭ estos lernita.",
    "34": "Sim. Esse é o suficiente.",
    "end": "E agora, o quê aprender? Aprenda, use, desfrute! Há cursos online em <a href=\"https://lernu.net\">lernu.net</a>, e em <a href=\"https://www.duolingo.com/\">Duolingo</a>, ou em <a href=\"https://learn.esperanto.com/\">Esperanto en 12 lecionoj</a>. Ou ainda melhor, se inscreva ao curso de <a href=\"https://londonaesperantoklubo.com/OnlineEsperantoCourses.html\">La Londona Esperanto-Klubo</a>."
  },
  "se": {
    "title": "Esperanto på 17 minuter"
  }
}

const localTranslations = {}

function flag(code) {
  if (code === 'eo') {
    // let f = document.createElement('div')
    // f.classList.add('eoflag')
    return 'Eo'
  }
  if (code === 'en') {
    code = 'gb'
  } else if (code === 'pt') {
    code = 'br'
  }

  const aL = 'a'.codePointAt(0)
  const aF = '🇦'.codePointAt(0)

  let out = ''
  for (let l of code) {
    let c = l.codePointAt(0)
    let o = aF + (c - aL)
    out += String.fromCodePoint(o)
  }

  return out
}

function setupLanguageChooser() {
  let chooser = document.querySelector('.languagechooser')
  let select = chooser.querySelector('select')

  let addLanguage = code => {
    let opt = document.createElement('option')
    opt.value = code
    opt.append(flag(code))
    select.append(opt)
  }

  for (let lang of Object.keys(translations).sort()) {
    addLanguage(lang)
  }

  let dispatch = () => {
    let lang = select.value
    document.dispatchEvent(new CustomEvent('language-change', { detail: lang }))
  }

  select.addEventListener('change', dispatch)

  let firstLang = navigator.language.split('-')[0]
  select.value = firstLang
  dispatch()

  document.addEventListener('new-language', e => {
    let lang = e.detail
    // doesn't add in order
    addLanguage(lang)
  })
}

function setupMainPage() {
  let translate = lang => {
    let baseText = translations['en']
    let text = translations[lang] || {}
    let localText = localTranslations[lang] || {}

    for (let e of document.querySelectorAll('.learn')) {
      let id = e.getAttribute('tid')
      e.innerHTML = localText[id] || text[id] || baseText[id]
    }

    document.title = text['title'] || baseText['title']
  }

  let setupAudioElement = e => {
    let id = e.getAttribute('fid')
    let eAudio = document.createElement('audio')
    eAudio.src = `sound/e${id}.mp3`
    e.append(eAudio)
    e.addEventListener('click', _e => {
      eAudio.play()
    })
    eAudio.addEventListener('play', _e => {
      e.classList.add('playing')
    })
    eAudio.addEventListener('ended', _e => {
      e.classList.remove('playing')
    })
    e.append('🔉\ufe0e')
  }

  let setupAudio = () => {
    for (let e of document.querySelectorAll('.listen')) {
      setupAudioElement(e)
    }
  }

  document.addEventListener('language-change', e => {
    translate(e.detail)
  })

  setupAudio()
}

function setupTranslationPage() {
  let tmpl = document.getElementById('translationtmpl').content.firstElementChild

  let nowLanguage = null
  let translationInputs = []
  let asJsonBox = document.querySelector('.asjson')

  let translate = lang => {
    let text = translations[lang] || {}
    let localText = localTranslations[lang] || {}

    for (let {id, box} of translationInputs) {
      box.value = localText[id] || text[id] || ''
    }

    showJson(lang)
  }

  let showJson = l => {
    let t = `"${l}": {\n`
    for (let {id, box} of translationInputs) {
      if (box.value) {
        t += `  "${id}": ${JSON.stringify(box.value)},\n`
      }
    }
    t += '}'
    asJsonBox.textContent = t
  }

  let saveTranslation = () => {
    let texts = {}
    for (let {id, box} of translationInputs) {
      if (box.value) {
        texts[id] = box.value
      }
    }
    localTranslations[nowLanguage] = texts
    showJson(nowLanguage)
  }

  // for (let e of document.querySelectorAll('.learn')) {
  //   let id = e.getAttribute('tid')
  //   let idtag = document.createElement('span')
  //   idtag.classList.add('idtag')
  //   idtag.textContent = `[#${id}]`
  //   e.prepend(idtag)
  // }

  let setup2 = () => {
    let eoText = translations['eo']

    let translationsBox = document.querySelector('.translations')
    for (let e of document.querySelectorAll('.learn')) {
      let id = e.getAttribute('tid')
      let tb = tmpl.cloneNode(true)
      tb.querySelector('.src').textContent = eoText[id]
      let box = tb.querySelector('input[type=text]')
      box.addEventListener('change', e => {
        saveTranslation(nowLanguage)
      })

      translationsBox.append(tb)

      translationInputs.push({
        id: id,
        box: box,
      })
    }

    translate(nowLanguage)

    document.querySelector('button[name=addlanguage]').addEventListener('click', e => {
      e.preventDefault()
      let lang = prompt('nova lingvo (dulitera kodo):')
      if (lang && !translations[lang]) {
        translations[lang] = {}

        document.dispatchEvent(new CustomEvent('new-language', { detail: lang }))
      }
    })
  }

  let toLesson = () => {
    document.body.classList.remove('trans')
    // XXX - copy pasted to trigger refresh
    document.dispatchEvent(new CustomEvent('language-change', { detail: nowLanguage }))
  }

  let firstTime = true
  let toTrans = () => {
    if (firstTime) {
      setup2()
      firstTime = false
    }
    document.body.classList.add('trans')
  }

  let onTrans = false
  document.body.addEventListener('dblclick', e => {
    if (e.ctrlKey) {
      onTrans = !onTrans
      if (onTrans) {
        toTrans()
      } else {
        toLesson()
      }
    }
  })

  document.addEventListener('language-change', e => {
    nowLanguage = e.detail
    if (onTrans) {
      translate(nowLanguage)
    }
  })
}

function main() {
  let en = {}
  for (let e of document.querySelectorAll('.learn')) {
    let id = e.getAttribute('tid')
    en[id] = e.innerHTML
    translations['en'] = en
  }

  setupMainPage()

  setupTranslationPage()

  setupLanguageChooser()
}

document.addEventListener('DOMContentLoaded', main)
